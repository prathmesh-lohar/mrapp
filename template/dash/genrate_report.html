{% extends 'base.html' %}

{% block main %}




<div class="container text-center">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>


    <canvas id="myChart" style="width:100%;max-width:750px"></canvas>
    
    <script>
    var xValues = ["completed", "pending", "canceled", "total"];
    var yValues = [{{completed}}, {{pending}}, {{canceled}}, {{total}}];
    var barColors = [
      "#009720",
      "#ffb100",
      "#ff0000",
      "#00C5CD"
    ];
    
    new Chart("myChart", {
      type: "pie",
      data: {
        labels: xValues,
        datasets: [{
          backgroundColor: barColors,
          data: yValues
        }]
      },
      options: {
        title: {
          display: true,
          text: "visit report"
        }
      }
    });
    </script>
    


</div>

<br>

<div class="container text-center">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

        <canvas id="barChart" style="width:100%;max-width:750px"></canvas>
        
        <script>
        var xValues =  ["completed", "pending", "canceled", "total"];
        var yValues = [{{completed}}, {{pending}}, {{canceled}}, {{total}}];
        var barColors = ["green", "orange","red","blue"];

     
        
        new Chart("barChart", {
          type: "bar",
          data: {
            labels: xValues,
            datasets: [{
              backgroundColor: barColors,
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
            title: {
              display: true,
              text: "visit report"
            }
          }
        });
        </script>
    

</div>

<br>
<br>


<div class="container">

  <div class="text-center">
    <form class="forn-inline" method="POST" action="/genrate_report"> 
      {% csrf_token %}
      <div class="row">

        <div class="col">
          <input type="text" class="form-control" placeholder="Mr Name/ Mr Username" aria-label="First name" name="mr">
        </div>

        <div class="col">
          <input type="date" class="form-control" placeholder="Date" aria-label="First name" name="fdate">
        </div>
       

        <div class="col">
          <input type="date" class="form-control" placeholder="Date" aria-label="First name" name="tdate">
        </div>
       

        <div class="col">
          <button class="btn btn-info form-control" type="submit">Submit</button>
        </div>

      </div>
    </form>
  </div>



<form  action="/report" method="POST">
  {% csrf_token %}  
<div class="input-group my-2 mb-3">
  <input type="text" class="form-control" name="mr" placeholder="filter data" aria-label="Recipient's username" aria-describedby="basic-addon2">
  <div class="input-group-append">
    <button class="btn btn-success" type="submit">Search</button>
  </div>
</div>
  
</form>
  <table class="table table-hover my-4" style="    border-style: solid;
  border-color: black;">
    <thead>
        <tr>
            <th scope="col">Dr. Name </th>
            <th scope="col">Date</th>
            <th scope="col">Time</th>
            <th scope="col">Mr</th>
            <th scope="col">Status</th>
            <th scope="col">Location</th>
        </tr>
    </thead>
    <tbody>
        {% for i in visit %}
          

        <tr>
            <th scope="row">{{i.doctor_first_name}}  {{i.doctor_last_name}}</th>
            <td>{{i.date}}</td>
            <td>{{i.time}}</td>
            <td>{{i.mr_username}}</td>
            <td>{{i.status}}
            </td>
            <td>
            <a href="/report_location/{{i.id}}"><i class="material-icons btn"  style="font-size:30px; color: orange;">pin_drop</i> 
            </a>
            </td>

            
        </tr>

     

        {% endfor %}

    </tbody>
</table>


</div>




 <style>
   .modal-backdrop {
    z-index: -1;
}
 </style>








  <div id="container " style="width: 70%; margin-left: 20%;">
    <canvas id="population-chart" data-url="{% url 'report' %}"></canvas>
  </div>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  

{% endblock %}